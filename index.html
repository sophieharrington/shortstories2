<!DOCTYPE html>
<html>
    <head>
        <title>Short Stories</title>
        
        <!-- FIREBASE -->
        <!-- The core Firebase JS SDK is always required and must be listed first -->
        <script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-auth.js"></script>
        <script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-database.js"></script>

        <script>
          // Your web app's Firebase configuration
          var firebaseConfig = {
            apiKey: "AIzaSyBdhDN0IM9QyiqdaV4ED7aziSwYlMW7VFU",
            authDomain: "short-stories2.firebaseapp.com",
            databaseURL: "https://short-stories2.firebaseio.com",
            projectId: "short-stories2",
            storageBucket: "short-stories2.appspot.com",
            messagingSenderId: "506168221956",
            appId: "1:506168221956:web:b1bedffe968cc2a37e7051"
          };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        var database = firebase.database();
            
            firebase.auth().signInAnonymously().catch(function(error) {
            var errorCode = error.code;
            var errorMessage = error.message;
        });      
        firebase.auth().onAuthStateChanged(function(user) {
            if (user) {
                var isAnonymous = user.isAnonymous;
                var uid = user.uid;
            }
        });
        </script>
        
        <!-- jsPsych -->
        <script type="text/javascript" src="jspsych-6.1.0/jspsych.js"></script>
        <script type='text/javascript' src='jspsych-6.1.0/plugins/jspsych-external-html.js'></script>
        <script type="text/javascript" src="jspsych-6.1.0/plugins/jspsych-instructions.js"></script>
        <script type="text/javascript" src="jspsych-6.1.0/plugins/jspsych-survey-likert.js"></script>
        <script type="text/javascript" src="jspsych-6.1.0/plugins/jspsych-html-slider-response.js"></script>
        <script type="text/javascript" src="jspsych-6.1.0/plugins/jspsych-survey-multi-choice.js"></script>
        <script type='text/javascript' src='jspsych-6.1.0/plugins/jspsych-survey-text.js'></script>
        <script type='text/javascript' src='jspsych-6.1.0/plugins/jspsych-html-button-response.js'></script>
        <link href="jspsych-6.1.0/css/jspsych.css" rel="stylesheet" type="text/css"></link>
        
        <!-- jsPsych -->
        <!-- CSS -->
        <style type="text/css">
            .instructions {
                margin-right: 300px;
                margin-left: 300px;
                text-align: left;
            }
            .retweet-button {
                position: relative;
                margin-top: 50px;
            }
            #left_button {
                position: relative;
                margin-left: 50px;
            }
        </style>
        
    </head>
    <body></body>
    <script type='text/javascript'>
        
        
        //Initialize vignettes and the condition order
        
        //Condition presentation order
        var order = [0,0,0,0,0,0,1,1,1,1,1,1,2,2,2,2,2,2];
        var order = jsPsych.randomization.shuffle(order);
        
        //Vignette presentation order
        var vignette_order = [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17];
        var vignette_order = jsPsych.randomization.shuffle(vignette_order);
        
        //Vignettes
        //1. Unintentional
        //2. Intentional
        //3. Ambiguous
        var harm = [
            //Unintentional harm
           [

               'Sofia is cooking dinner for a family gathering. She has been perfecting a curry recipe. Sofia does not know her cousin attending the dinner has a peanut allergy. Sofia adds peanuts to every plate and serves. Her cousin takes a large mouthful. Within a few minutes, her cousin has an allergic reaction and the family rush for her epipen.',
 'Matthew is taking an advanced English class. To prepare for their assignment, the teacher passes out a sample essay for class discussion. Matthew does not know that a student in the class wrote the essay. Matthew says in front of the class that the essay must have been written by a third-grader. The student who wrote the essay leaves the room.',
 'Eleanor is swimming at a communal pool. A young girl is preparing to dive in. Eleanor believes that the girl is being supervised by her parents. Eleanor swims past, without saying anything to the girl. The girl hits her head at the shallow end of the pool and starts screaming. ',
 "Emma works as a medical doctor. Today she has a routine examination and typically, she wears latex gloves. Emma reads this patient's records and believes they are not allergic to latex. Emma puts on latex gloves and examines her patient. Before long, the patient has a severe allergic reaction to Emma's gloves.",
 'William is driving his motorboat in the bay, after a trip to a secluded beach. He spots a swimmer in the far distance. He believes the swimmer is waving an enthusiastic "hello". William drives past, leaving the swimmer behind. No one else sees the swimmer\'s cry for help and the swimmer drowns.',
 'Abigail is at a bar, drinking alcoholic cocktails. At the end of the night, Abigail believes she has sobered up. Abigail decides to leave and gives her friend a lift home. On the road, Abigail is out of control and has to brake suddenly. Her friend hits her head on the dashboard.',
 "Sebastian is a chef at a sushi bar. Recently, Sebastian has changed his tuna fish supplier to save money. He does not know the new supplier's fish is always out-of-date. That week, he serves this new supply of tuna fish to his customers. Many customers who order tuna leave the restaurant with severe food poisoning.",
 "Lucas and his brother are camping in the woods. There are wild mushrooms growing and Lucas studies them by consulting his plant life guide. Lucas believes these mushrooms match the edible mushrooms in his guide. Lucas gives the mushrooms to his brother. Lucas' brother eats them and 10 minutes later he starts convulsing.",
 'Elizabeth is at the airport. She notices a woman running through the terminal. The floor has just been mopped, and there is a “Wet Floor” sign. Elizabeth believes that the woman has seen this sign. Elizabeth does not warn her of the wet floor. The woman falls over and misses her flight waiting for medics to arrive.',
 'Daniel is showing a visitor around his chemistry laboratory. Before anyone enters the laboratory, it needs to be checked for toxic gas. Daniel believes the laboratory is safe. He tells the visitor to enter. The visitor soon starts gasping for air and collapses.',
 'Olivia is walking home. She passes a runner that is breathless and clasping an asthma inhaler. Olivia does not see the inhaler and thinks the runner is not having an asthma attack. Olivia walks past, leaving the runner. The runner does not receive any medical attention and collapses.',
 "Benjamin is a carer for elderly patients with Alzheimer's. Benjamin is currently visiting a patient and he needs to leave the house to buy them groceries. As he is leaving, his patient starts coughing. He believes the cough sounds normal. When Benjamin returns from the grocery store, his patient is having a seizure.",
 "Hannah owns a rock climbing center and she has just purchased new climbing ropes. Hannah thinks that the new ropes are safe, as they are from a reputable supplier. Hannah attaches the new ropes to a climber's harness. Halfway up the climbing wall, the rope snaps and the climber plummets to the ground. ",
 'Charlotte works at an airport. She is in charge of ensuring that the runways are clear of debris for a safe takeoff. Charlotte believes that the runway is safe. She gives the OK for takeoff. When the plane tries to take off, the wheels suffer serious damage. Three passengers are injured.',
 "Ryan is at an animal zoo with his nephew. After lunch, his nephew complains that his stomach hurts. Ryan is not aware this pain could be a complication from his nephew's recent operation. Ryan takes his nephew to see the monkeys. His nephew is in so much pain that he collapses.",
 "Elijah works on reception at a veterinary center. During his lunch break, Elijah's friend visits him. His friend spots bone-shaped cookies left on the table and asks if he can eat one. Elijah believes that these cookies are good for human consumption. He lets him take one. The cookies are used to put dogs to sleep. After several bites, his friend starts gagging and breaks into a sweat.",
 "Grace and her colleague are taking a break from their work. Grace fetches them both a coffee. In the kitchen, there is a container of white powder on the side. Grace thinks that it is sugar. Grace puts the substance in her colleague's coffee. The white powder is salt. Grace's colleague spits out her coffee in a meeting as it tastes disgusting.",
 'Amelia manages the chairlift operations for a ski resort. At the start of her shift, Amelia believes that the ski lift is in a safe condition. She starts the chairlift for the first passengers. Half way through the ride, the chairlift malfunctions and stops suddenly. Two people are injured.'
           ],
            
            //Intentional harm
            [
                 'Sofia is cooking dinner for a family gathering. She has been perfecting a curry recipe. Sofia knows her cousin attending the dinner has a peanut allergy. Sofia adds peanuts to every plate and serves. Her cousin takes a large mouthful. Within a few minutes, her cousin has an allergic reaction and the family rush for her epipen.',
 'Matthew is taking an advanced English class. To prepare for their assignment, the teacher passes out a sample essay for class discussion. Matthew knows that a student in the class wrote the essay. Matthew says in front of the class that the essay must have been written by a third-grader. The student who wrote the essay leaves the room.',
 'Eleanor is swimming at a communal pool. A young girl is preparing to dive in. Eleanor believes the child is not being supervised by her parents. Eleanor swims past, without saying anything to the girl. The girl hits her head at the shallow end of the pool and starts screaming.',
 "Emma works as a medical doctor. Today she has a routine examination and typically, she wears latex gloves. Emma reads the patient's records and believes they are allergic to latex. Emma puts on latex gloves and examines her patient. Before long, the patient has a severe allergic reaction to Emma's gloves.",
 "William is driving his motorboat in the bay, after a trip to a secluded beach. He spots a swimmer in the far distance. He believes that the swimmer is desperate for help. William drives past, leaving the swimmer behind. No one else sees the swimmer's cry for help and the swimmer drowns.",
 'Abigail is at a bar, drinking alcoholic cocktails. At the end of the night, Abigail believes she has not sobered up. Abigail decides to leave and gives her friend a lift home. On the road, Abigail is out of control and has to brake suddenly. Her friend hits her head on the dashboard.',
 "Sebastian is a chef at a sushi bar. Recently, Sebastian has changed his tuna fish supplier to save money. He knows that the new supplier's fish is always out-of-date. That week, he serves this new supply of tuna fish to his customers. Many customers who order tuna leave the restaurant with severe food poisoning.",
 "Lucas and his brother are camping in the woods. There are wild mushrooms growing and Lucas studies them by consulting his plant life guide. He believes these mushrooms match the poisonous mushrooms in his guide. Lucas gives the mushrooms to his brother. Lucas' brother eats them and 10 minutes later he starts convulsing.",
 'Elizabeth is at the airport. She notices a woman running through the terminal. The floor has just been mopped, and there is a “Wet Floor” sign. Elizabeth believes that the woman has not seen this sign. Elizabeth does not warn her of the wet floor. The woman falls over and misses her flight waiting for medics to arrive.',
 'Daniel is showing a visitor around his chemistry laboratory. Before anyone enters the laboratory, it needs to be checked for toxic gas. Daniel believes the laboratory is not safe. He tells the visitor to enter. The visitor soon starts gasping for air and collapses.',
 'Olivia is walking home. She passes a runner that is breathless and clasping an asthma inhaler. Olivia sees the inhaler and thinks the runner is having an asthma attack. Olivia walks past, leaving the runner. The runner does not receive any medical attention and collapses.',
 "Benjamin is a carer for elderly patients with Alzheimer's. Benjamin is currently visiting a patient and he needs to leave the house to buy them groceries. As he is leaving, his patient starts coughing. He believes the cough does not sound normal. When Benjamin returns from the grocery store, his patient is having a seizure.",
 "Hannah owns a rock climbing center and she has just purchased new climbing ropes. Hannah thinks that the new ropes are unsafe, as they are from a disreputable supplier. Hannah attaches the new ropes to a climber's harness. Halfway up the climbing wall, the rope snaps and the climber plummets to the ground.",
 'Charlotte works at an airport. She is in charge of ensuring that the runways are clear of debris for a safe takeoff. Charlotte believes that the runway is not safe. She gives the OK for the takeoff. When the plane tries to take off, the wheels suffer serious damage. Three passengers are injured.',
 "Ryan is at an animal zoo with his nephew. After lunch, his nephew complains that his stomach hurts. Ryan is aware this pain could be a complication from his nephew's recent operation. Ryan takes his nephew to see the monkeys. His nephew is in so much pain that he collapses.",
 "Elijah works on reception at a veterinary center. During his lunch break, Elijah's friend visits him. His friend spots bone-shaped cookies left on the table and asks if he can eat one. Elijah believes that these cookies are not good for human consumption. He lets him take one. The cookies are used to put dogs to sleep. After several bites, his friend starts gagging and breaks into a sweat. ",
 "Grace and her colleague are taking a break from their work. Grace fetches them both a coffee. In the kitchen, there is a container of white powder on the side. Grace thinks it is salt. Grace puts the substance in her friend's coffee. The white powder is salt. Grace's colleague spits out her coffee in a meeting, as it tastes disgusting.",
 'Amelia manages the chairlift operations for a ski resort. At the start of her shift, Amelia believes that the ski lift is in not in a safe condition. She starts the chairlift for the first passengers. Half way through the ride, the chairlift malfunctions and stops suddenly. Two people are injured.'
            ],
            
            
            //Ambiguous harm
            [
                'Sofia is cooking dinner for a family gathering. She has been perfecting a curry recipe. Sofia lays the table and passes out drinks to everyone. Sofia adds peanuts to every plate and serves. Her cousin takes a large mouthful. Within a few minutes, her cousin has an allergic reaction and the family rush for her epipen.',
 'Matthew is taking an advanced English class. To prepare for their assignment, the teacher passes out a sample essay for class discussion. Matthew puts his notepad and pen out on the desk. Matthew says in front of the class that the essay must have been written by a third-grader. The student who wrote the essay leaves the room.',
 'Eleanor is swimming at the public pool. A young girl is preparing to dive in. Eleanor swims to collect her towel and toiletries, by the side of the pool. Eleanor swims past, without saying anything to the girl. The girl hits her head at the shallow end of the pool and starts screaming.',
 "Emma works as a medical doctor. Today she has a routine examination and typically, she wears latex gloves. She asks the patient to roll their sleeves up, to see their arm. Emma puts on latex gloves and examines her patient. Before long, the patient has a severe allergic reaction to Emma's gloves.",
 "William is driving his motorboat in the bay, after a trip to a secluded beach. He spots a swimmer in the far distance. William adjusts his hands on his the steering wheel. William drives past, leaving the swimmer behind. No one else sees the swimmer's cry for help and the swimmer drowns.",
 'Abigail is at a bar, drinking alcoholic cocktails. At the end of the night, Abigail makes a stop at the bathroom. Abigail decides to leave and gives her friend a lift home. On the road, Abigail is out of control and has to brake suddenly and her friend hits her head on the dashboard.',
 'Sebastian is a chef at a sushi bar. Recently, Sebastian has changed his tuna fish supplier to save money. He makes a list of the other fish that he will need to purchase. That week, he serves this new supply of tuna fish to his customers. Many customers who order tuna leave the restaurant with severe food poisoning.',
 "Lucas and his brother are camping in the woods. There are wild mushrooms growing and Lucas studies them by consulting his plant life guide. He puts his raincoat on, as it looks like it may be starting to rain. Lucas gives the mushrooms to his brother. Lucas' brother eats them and 10 minutes later he starts convulsing. ",
 'Elizabeth is at the airport. She notices a woman running through the terminal. The floor has just been mopped, and there is a “Wet Floor” sign. Elizabeth visits the vending machine for a drink. Elizabeth does not warn her of the wet floor. The woman falls over and misses her flight waiting for medics to arrive.',
 'Daniel is showing a visitor around his chemistry laboratory. Before anyone enters the laboratory, it needs to be checked for toxic gas. Daniel opens the door and turns the lights on. He tells the visitor to enter. The visitor soon starts gasping for air and collapses.',
 'Olivia is walking home. She passes a runner that is bent over gasping for breath and clasping an asthma inhaler. Olivia unlocks her phone and checks the notifications. Olivia walks past, leaving the runner. The runner does not receive any medical attention and collapses.',
 "Benjamin is a carer for elderly patients with Alzheimer's. Benjamin is currently visiting a patient and he needs to leave the house to buy them groceries. As he is leaving, his patient starts coughing. He picks up his shopping list from the counter. When Benjamin returns from the grocery store, his patient is having a seizure.",
 "Hannah owns a rock climbing center and she has just purchased new climbing ropes. Hannah finishes processing the paperwork. Hannah attaches the new ropes to a climber's harness. Halfway up the climbing wall, the rope snaps and the climber plummets to the ground.",
 'Charlotte works at an airport. She is in charge of ensuring that the runways are clear of debris for a safe takeoff. Charlotte checks the afternoon flight schedule. She gives the OK for the takeoff. When the plane tries to take off, the wheels suffer serious damage. Three passengers are injured.',
 'Ryan is at an animal zoo with his nephew. After lunch, his nephew complains that his stomach hurts. Ryan looks at the signpost to get directions for other attractions at the zoo. Ryan takes his nephew to see the monkeys. His nephew is in so much pain that he collapses.',
 "Elijah works on reception at a veterinary center. During his lunch break, Elijah's friend visits him. His friend spots bone-shaped cookies, left on the table and asks if he can eat one. Elijah picks up a napkin to wipe his hands and face. He lets him take one. The cookies are used to put dogs to sleep. After several bites, his friend starts gagging and breaks into a sweat.",
 "Grace and her colleague are taking a break from their work. Grace fetches them both a coffee. In the kitchen, there is a container of white powder on the side. Grace picks up two clean mugs. Grace puts the substance in her friend's coffee. The white powder is salt. Grace's colleague spits out her coffee in a meeting, as it tastes disgusting.",
 'Amelia manages the chairlift operations for a ski resort. At the start of her shift, Amelia sits down and turns the equipment on. She starts the chairlift for the first passengers. Half way through the ride, the chairlift malfunctions and stops suddenly. Two people are injured.'
            ],
            
            //Comprehension questions harm
            [
                "What is Sofia's cousin allergic to?",
 "What is Matthew's class reading?",
 'Where does the young girl hit her head?',
 "What are Emma's gloves made of?",
 'What is William driving?',
 "What does Abigail's friend injure?",
 "What makes Sebastian's customers ill? ",
 "What does Lucas' offer to his brother?",
 'Where is Elizabeth?',
 'What is the laboratory contaminated with? ',
 'Who does Olivia see on the footpath?',
 'Where does Benjamin go after leaving the house?',
 'What equipment does Hannah buy for the climbing center?',
 "What is the nature of Charlotte's job?  ",
 'Where does Ryan take his nephew?  ',
 'Where does Elijah work?',
 "What does Grace put in her colleague's coffee?",
 'What is malfunctioning at the ski resort?'
            ],
            //Actor harm
            [
               'Sofia',
 'Matthew',
 'Eleanor',
 'Emma',
 'William',
 'Abigail',
 'Sebastian',
 'Lucas',
 'Elizabeth',
 'Daniel',
 'Olivia',
 'Benjamin',
 'Hannah',
 'Charlotte',
 'Ryan',
 'Elijah',
 'Grace',
 'Amelia'
            ],
            //Correct answer harm
            [
                'Peanuts',
 'A sample essay',
 'At the shallow end',
 'Latex',
 'Motorboat',
 'Head',
 'Tuna fish',
 'Mushrooms',
 'Airport terminal',
 'Toxic gas ',
 'A runner',
 'Grocery store',
 'Rope',
 'Runway safety',
 'Animal zoo',
 'Veterinary center',
 'Salt',
 'Chairlift'
            ],
            //Other option 1 harm
            [
                'Medicine',
 'A textbook',
 'On the waterslide',
 'Cotton',
 'Car',
 'Ankle',
 'Curry',
 'Berries',
 'Train station',
 'Infectious diseases',
 'A medical doctor',
 'Pharmacy',
 'Harness',
 'Pilot ',
 'Aquarium',
 "Children's hospital",
 'Sweetener',
 'Ski passes'
            ],
            //Other option 3 harm
            [
                'Cashews',
 'A novel',
 'On the diving board',
 'Leather',
 'Motor Bicycle',
 'Knees',
 'Sushi rice',
 'Leaves',
 'Bus stop',
 'Cleaning products',
 'A cyclist',
 'Gas station',
 'Shoes',
 'Flight attendant',
 'Emergency room',
 'Dog kennel',
 'Milk',
 'Coffee machine'
            ]
        ];
            
            //Unintentional good
        var good = [
            [
                "Liam is clearing out clothes from his closet. He visits the recycling center to dispose of them. Liam believes he is sending his clothes to landfill. He puts them in the unwanted clothing bin. This clothing bin raises money for a local children's charity. Liam's clothing raises over $60.",
 "Grayson's delivery he ordered for dinner arrives. His order totals to $20. Grayson thinks he is handing the delivery driver $20. Grayson hands the delivery driver a $50 bill. The delivery driver has a $30 tip.",
 'Hannah hears about a half-marathon held in her local area. Hannah decides to register for it online. Hannah believes the registration fee is to pay for the administrative costs of the event. She pays the $30 fee, which is entirely donated to a local homeless shelter.',
 "Zoey's friend is entering an essay into a writing competition. Zoey believes her friend has already submitted the essay. Zoey shares some of her feedback on her friend's work. Zoey's friend is still working on her essay. With Zoey's suggestions, she wins the competition.",
 "Nora is meeting her friend for a drink, after work. Nora's friend suggests that they meet by the charity store she works at. Nora's friend is still working and Nora thinks her friend is taking too long. Nora goes inside the store and helps her friend sort the donations.",
 "Joseph manages his own company. He is overseeing the redesign of his products' packaging. Joseph believes that the new packaging will lower manufacturing costs. The new packaging is made out of recycled paper. This change will cut down the company's plastic waste by 70%.",
 'Owen runs his own restaurant. He serves a family that are celebrating a birthday. He goes to the cash register to calculate their bill. Owen thinks he is charging the family 20% extra, for gratuity. Owen hands the family their bill and their meal is cheaper than they anticipated.',
 "Penelope is studying in the library for her upcoming exams. Nearby, a student is searching for their lost phone. Penelope thinks her shoelace is untied. Penelope reaches down to the floor. Penelope sees the student's lost phone under a chair and gives it to the student.",
 "Luna's university is advertising a summer trip to Haiti. When Luna sees the advertisement, she believes that the trip is for sightseeing. Luna signs up for the trip. When Luna travels to Haiti, she spends a week building a school for an impoverished village.",
 'Chris is asleep on the train home from work. A pregnant lady gets on the train and is standing near him. Chris wakes up and believes that the train is approaching his stop. Chris leaves his seat and the pregnant lady can sit down. Chris stands for the remaining 20 minutes of his journey.',
 "Avery is walking home from school and passes her elderly neighbor's house. Avery thinks her neighbor has some of her mail and rings their doorbell. Avery's neighbor invites her in. She helps her neighbor with some gardening.",
 "John shares an apartment with his college roommate. John thinks that it is his turn to clean the kitchen, so John spends an hour cleaning. When John's roommate arrives back at the apartment, he is grateful he does not need to do his share of the cleaning.",
 'Isaac sees a homeless man as he is walking down the street. Isaac does not have any spare change, but he does have a lottery ticket from a few weeks ago. Isaac believes that the ticket has expired and he gives them the ticket. The ticket is still valid and the homeless man wins $100.',
 "Luke wakes up during the night, remembering to set an alarm for the morning. Luke thinks his partner does not need to wake up early. Luke alarm is accidentally set for 6:00 AM. Because Luke's partner wakes up with Luke's alarm, they are on time for an important meeting they had forgotten about.",
 "Natalie and her work colleague are both writing a monthly report for their manager. Natalie thinks she is just sending her report to her manager. Natalie accidentally emails her report to her colleague. Because reading Natalie's report was helpful, Natalie's colleague manages to meet the assignment deadline.",
 'Victoria has been stuck in deadlock traffic for the past 45 minutes. Victoria thinks that the traffic lights up ahead are red. Victoria stays stationary. Because Victoria stops, a car that has been waiting can merge into a busy lane.',
 "Dylan is a barista and owns his own coffee shop. He is making a customer's coffee. Dylan thinks that the customer has already paid for their coffee. Dylan does not take any payment from the customer and they get their coffee for free.",
 'Chloe is paying at the meter to park her car. Chloe thinks that she will need to park there all day and pays to park there for the entire day. Two hours later, Chloe leaves her parking space and drives home. Because Chloe paid for their parking, a stranger can park there for free.'
            ],    
            //Intentional good 
            [
                "Liam is clearing out clothes from his closet. He visits the recycling center to dispose of them. Liam believes he is donating his clothes to charity. He puts them in the unwanted clothing bin. This clothing bin raises money for a local children's charity. Liam's clothing raises over $60.",
 "Grayson's delivery he ordered for dinner arrives. His order totals to $20. Grayson thinks he is handing the delivery driver $50. Grayson gives the delivery driver a $50 bill. The delivery driver has a $30 tip.",
 'Hannah hears about a half-marathon held in her local area. Hannah decides to register for it online. Hannah believes the registration fee is donated to a nearby charity. She pays the $30 fee, which is entirely donated to a local homeless shelter.',
 "Zoey's friend is entering an essay into a writing competition. Zoey believes her friend is struggling to submit the essay. Zoey shares some of her feedback on her friend's work. Zoey's friend is still working on her essay. With Zoey's suggestions, she wins the competition.",
 "Nora is meeting her friend for a drink, after work. Nora's friend suggests that they meet by the charity store she works at. Nora's friend is still working and Nora thinks her friend could do with some help. Nora goes inside the store and helps her friend sort the donations.",
 "Joseph manages his own company. He is overseeing the redesign of his products' packaging. Joseph believes that the new packaging will be more environmentally sustainable. The new packaging is made out of recycled paper. This change will cut down the company's plastic waste by 70%.",
 'Owen runs his own restaurant. He serves a family that are celebrating a birthday. He goes to the cash register to calculate their bill. Owen thinks he is giving the family the 20% birthday discount.Owen hands the family their bill and their meal is cheaper than they anticipated.',
 "Penelope is studying in the library for her upcoming exams. Nearby, a student is searching for their lost phone. Penelope thinks the student's phone may be on the floor. Penelope reaches down to the floor. Penelope sees the student's lost phone under a chair and gives it to the student.",
 "Luna's university is advertising a summer trip to Haiti. When Luna sees the advertisement, she believes that the trip is for community outreach. Luna signs up for the trip. When Luna travels to Haiti, she spends a week building a school for an impoverished village.",
 'Chris is asleep on the train home from work. A pregnant lady gets on the train and is standing near him. Chris wakes up and believes that this lady should have his seat. Chris leaves his seat and the pregnant lady can sit down. Chris stands for the remaining 20 minutes of his journey.',
 "Avery is walking home from school and passes her elderly neighbor's house. Avery thinks her neighbor needs some assistance with some gardening and rings their doorbell. Avery's neighbor invites her in. She helps her neighbor with some gardening.",
 "John shares an apartment with his college roommate. John thinks that it is his roommate's turn to clean the kitchen, but John spends an hour cleaning the kitchen anyway. When John's roommate arrives back at the apartment, he is grateful he does not need to do his share of the cleaning.",
 'Isaac sees a homeless man as he is walking down the street. Isaac does not have any spare change, but he does have a lottery ticket from a few weeks ago. Isaac believes that he has a winning ticket of $100 and he gives them the ticket. The ticket is still valid and the homeless man wins $100.',
 "Luke wakes up during the night, remembering to set an alarm for the morning. Luke thinks his partner needs to wake up early. Luke alarm is set for 6:00 AM.Because Luke's partner wakes up with Luke's alarm, they are on time for an important meeting they had forgotten about.",
 "Natalie and her work colleague are both writing a monthly report for their manager. Natalie thinks her colleague is struggling to write her report. Natalie emails her report to her colleague. Because reading Natalie's report was helpful, Natalie's colleague manages to meet the assignment deadline.",
 'Victoria has been stuck in deadlock traffic for the past 45 minutes. Victoria thinks that the car in front needs to merge. Victoria stays stationary. Because Victoria stops, a car that has been waiting can merge into a busy lane.',
 "Dylan is a barista and owns his own coffee shop. He is making a customer's coffee. Dylan thinks that the customer should have their coffee for free. Dylan does not take any payment from the customer and they get their coffee for free.",
 'Chloe is paying at the meter to park her car. Chloe thinks that the next person should park in the space for free and pays to park there for the entire day. Two hours later, Chloe leaves her parking space and drives home. Because Chloe paid for their parking, a stranger can park there for free.'
            ],
            
            //Ambiguous good 
            [
                "Liam is clearing out clothes from his closet. He visits the recycling center to dispose of them. Liam puts the clothes into a bag and ties it up. He puts them in the unwanted clothing bin. This clothing bin raises money for a local children's charity. Liam's clothing raises over $60.",
 "Grayson's delivery he ordered for dinner arrives. His order totals to $20. Grayson gets up to open the door when the doorbell rings. Grayson gives the delivery driver a $50 bill. The delivery driver has a $30 tip.",
 'Hannah hears about a half-marathon held in her local area. Hannah decides to register for it online. Hannah enters her credit card details into the website. She pays the $30 fee, which is entirely donated to to a local homeless shelter.',
 "Zoey's friend is entering an essay into a writing competition. Zoey is sitting next to her friend and finishing her sandwich. Zoey shares some of her feedback on her friend's work. Zoey's friend is still working on her essay. With Zoey's suggestions, she wins the competition.",
 "Nora is meeting her friend for a drink, after work. Nora's friend suggests that they meet by the charity store she works at. Nora's friend is still working and Nora parks right outside the store. Nora goes inside the store and helps her friend sort the donations.",
 "Joseph manages his own company. He is overseeing the redesign of his products' packaging. Joseph has a meeting with his recruitment team. The new packaging is made out of recycled paper. This change will cut down the company's plastic waste by 70%.",
 'Owen runs his own restaurant. He serves a family that are celebrating a birthday. He goes to the cash register to calculate their bill. Owen adjusts his apron and straightens his tie. Owen hands the family their bill and their meal is cheaper than they anticipated.',
 "Penelope is studying in the library for her upcoming exams. Nearby, a student is searching for their lost phone. Penelope finishes highlighting her study notes. Penelope reaches down to the floor. Penelope sees the student's lost phone under a chair and gives it to the student.",
 "Luna's university is advertising a summer trip to Haiti. When Luna sees the advertisement, she is walking to her class. Luna signs up for the trip. When Luna travels to Haiti, she spends a week building a school for an impoverished village.",
 'Chris is asleep on the train home from work. A pregnant lady gets on the train and is standing near him. Chris wakes up and picks his coat up from the floor. Chris leaves his seat and the pregnant lady can sit down. Chris stands for the remaining 20 minutes of his journey.',
 "Avery is walking home from school and passes her elderly neighbor's house. Avery takes her backpack off and rings their doorbell. Avery's neighbor invites her in. She helps her neighbor with some gardening.",
 "John shares an apartment with his college roommate. John eats his lunch at the kitchen table. John spends an hour cleaning the kitchen. When John's roommate arrives back at the apartment, he is grateful he does not need to do his share of the cleaning.",
 'Isaac sees a homeless man as he is walking down the street. Isaac does not have any spare change, but he does have a lottery ticket from a few weeks ago. Isaac zips his coat up and gives them the ticket. The ticket is still valid and the homeless man wins $100.',
 "Luke wakes up during the night, remembering to set an alarm. Luke checks some notifications on his phone. Luke alarm is set for 6:00 AM. Because Luke's partner wakes up with Luke's alarm, they are on time for an important meeting they had forgotten about.",
 "Natalie and her work colleague are both writing a monthly report for their manager. Natalie finishes creating a graph and adds it to her report. Natalie emails her report to her colleague. Because reading Natalie's report was helpful, Natalie's colleague manages to meet the assignment deadline.",
 'Victoria has been stuck in deadlock traffic for the past 45 minutes. Victoria changes the radio station that is playing. Victoria stays stationary. Because Victoria stops, a car that has been waiting can merge into a busy lane.',
 "Dylan is a barista and owns his own coffee shop. He is making a customer's coffee. Dylan adds some more coffee beans to the coffee grinder. Dylan does not take any payment from the customer and they get their coffee for free.",
 'Chloe is paying at the meter to park her car. Chloe gets her car keys from the bottom of her bag and pays to park there for the entire day. Two hours later, Chloe leaves her parking space and drives home. Because Chloe paid for their parking, a stranger can park there for free.'
            ],
        
            //Comprehension questions good
            [
                'What does Liam donate to charity?',
 'What does Grayson get delivered?',
 'What does Hannah register for?',
 "What competition does Zoey's friend enter?",
 "Where does Nora's friend work?",
 "What initiative does Joseph's company launch?",
 'What does Owen give to the family?',
 'Where is Penelope studying?',
 'Where does Luna travel in the summer?',
 'Where does Chris fall asleep?',
 'Who does Avery visit after school?',
 'What does John do for his roommate?',
 'What does Isaac give to the homeless man?',
 'What time does Luke set his alarm?',
 'What is Natalie writing?',
 'What mode of transport does Victoria uaw?',
 'What does Dylan give to the customer for free?',
 'What is Chloe paying for?'
            ],
            
            //Actor good 
            [
                'Liam',
 'Grayson',
 'Hannah',
 'Zoey',
 'Nora',
 'Joseph',
 'Owen',
 'Penelope',
 'Luna',
 'Chris',
 'Avery',
 'John',
 'Isaac',
 'Luke',
 'Natalie',
 'Victoria',
 'Dylan',
 'Chloe'
            ],
            
            //Correct answer good
            [
                'Clothes',
 'Food',
 'Half marathon',
 'Essay writing',
 'Charity store',
 'New product packaging',
 'Discounted food',
 'Library',
 'Haiti',
 'On the train',
 'Her neighbor',
 'Cleaning',
 'Lottery ticket',
 '6AM',
 'A monthly report',
 'Car',
 'Coffee',
 'A parking space'
            ],
            
            //Other option 2 good 
            [
                'Money',
 'Alcohol',
 'Iron man challenge',
 'Marathon',
 'Supermarket',
 'New product range',
 'Extra food',
 'Cafe',
 'Australia',
 'On the sofa',
 'Her mother',
 'Cooking',
 'Food',
 '11AM',
 'A letter',
 'Bus',
 'Croissant',
 'A car wash'
            ],
            
            //Other option 3 good 
            [
                'Shoes',
 'Milk',
 'Swimming race',
 'Spelling bee',
 'Clothing store',
 'Quicker delivery time',
 'Poor service',
 'At home',
 'Kenya',
 'At the office',
 'Her teacher',
 'Studying',
 'Advice',
 '2PM',
 'A blog post',
 'Train',
 'Water',
 'A speeding ticket'
            ],
        ];
        
        //Randomly assign a condition, eaither harm or good vignettes
        var vignettes = jsPsych.randomization.sampleWithoutReplacement([harm, good], 1)[0];
        
        //Lists of randomized vignettes, in the appropriate condition
        var vignettes_rand = [[],[],[],[],[],[],[],[]];
        
        //Number of conditions + 2 (for comprehension questions and actors) + 3 (for each answer to the MCQs)
        var n_elements = 8;
        
        //Number of vignettes
        var n_vignettes = 18;
        
        //The following two loops take the existing vignettes and add them to a new list in a shuffled order that corresponds to the order
        //that is saved in 'shuffled_order'. It does this while preserving the order of the vignettes across the three conditions and the comprehension questions
        //I.e., michael, michael, michael, dietary requirements, michael?
        var j;
        var i;
        //For every element in the list of vignettes (i.e., unintentional, intentional, ambiguous, and comprehension questions) . .. 
        for (j = 0; j < n_elements; j++) {
            // . . . go through each of the elements in each condition list . . . 
            for(i = 0; i < n_vignettes; i++) {
                // . . . and, to the list of randomised vignettes (currently black), add the vignette from the corresponding condition . . .
                //. . . at the position marked in the shuffled vignette_order variable
                vignettes_rand[j][i] = vignettes[j][vignette_order[i]]
                
            }
        };
        
        //Create a 'timeline' -  a list of all the trials
        var timeline = [];
        
        //Function to check whether consent has been given
        var check_consent = function(elem) {
            if (document.getElementById('consent_checkbox').checked) {
                return true;
            }
            else {
                alert("If you wish to participate, you must check the box next to the statement 'I agree to participate in this study.'");
                return false;
            }
            return false; 
        };
        
        //Presents external consent page to participants
         var consent = {
            type:'external-html',
            url: "consent.html",
            cont_btn: "start",
            check_fn: check_consent
        };
        timeline.push(consent);
    
        var instructions = {
            type: 'instructions',
            pages: ["<div class = 'instructions'><p>In this study, you will view <b>short stories</b>. For each story, you will  read it and then answer questions about different aspects of the story.</p><p>Please read carefully as you will be asked comprehension questions throughout the task. A <b>bonus payment</b> will be given to you if you get the correct answer to one of these questions, chosen randomly.</p><p>Please click <b>Next</b> to begin the task.</p></div>"],
            show_clickable_nav: true,
            on_finish: function(data) {
                data.vignettes = vignettes_rand
            }
        };
        timeline.push(instructions);

        var n_trials = 18;
        var k;
        for (k = 0; k < n_trials; k++) {
            
            var start1 = jsPsych.randomization.sampleWithoutReplacement([1, 2, 3, 4, 5, 6, 7], 1)[0];
            var start2 = jsPsych.randomization.sampleWithoutReplacement([1, 2, 3, 4, 5, 6, 7], 1)[0];
            var start3 = jsPsych.randomization.sampleWithoutReplacement([1, 2, 3, 4, 5, 6, 7], 1)[0];
            var start4 = jsPsych.randomization.sampleWithoutReplacement([1, 2, 3, 4, 5, 6, 7], 1)[0];
            var start5 = jsPsych.randomization.sampleWithoutReplacement([1, 2, 3, 4, 5, 6, 7], 1)[0];
            var start6 = jsPsych.randomization.sampleWithoutReplacement([1, 2, 3, 4, 5, 6, 7], 1)[0];
            var start7 = jsPsych.randomization.sampleWithoutReplacement([1, 2, 3, 4, 5, 6, 7], 1)[0];
            var start8 = jsPsych.randomization.sampleWithoutReplacement([0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100], 1)[0];
            
            var disp_vignette = {
                type: 'instructions',
                pages: ['<div class = "instructions"><p><b>Read</b> the story below <b>carefully</b> and when you are done click <b>Next</b> to answer the questions about the story:</p><br><br><p style="font-size:20px;"><i>' + vignettes_rand[order[k]][k] + '</i></p></div>'],
                show_clickable_nav: true
            };
            timeline.push(disp_vignette);
            
            var goodness ={
                type: 'html-slider-response',
                stimulus: '<div class = "instructions"><p><b>Read</b> the story below <b>carefully</b> and answer the questions that follow:</p><br><br><p style="font-size:20px;"><i>' + vignettes_rand[order[k]][k] + '</i></p><br><br></div><p><b>How good do you think ' + vignettes_rand[4][k] + ' is as a person?</b></p>',
                labels: ["1</p>Mainly a bad person", "2</p>", "3</p>", "4</p>Neither a bad nor a good person", "5</p>", "6</p>", "7</p>Mainly a good person"],
                require_movement: true,
                slider_width: 800,
                min: 1,
                max: 7,
                step: 1,
                start: start1,
                on_finish: function(data){
                    data.scale_start = start1
                }
            };
            timeline.push(goodness);

            var certainty ={
                type: 'html-slider-response',
                stimulus: '<div class = "instructions"><p><b>Read</b> the story below <b>carefully</b> and answer the questions that follow:</p><br><br><p style="font-size:20px;"><i>' + vignettes_rand[order[k]][k] + '</i></p><br><br></div><p><b>How certain are you that ' + vignettes_rand[4][k] + ' is a good or bad person?</b></p>',
                labels: ["1</p>Very uncertain", "2</p>", "3</p>", "4</p>Neither uncertain nor certain", "5</p>", "6</p>", "7</p>Very certain"],
                require_movement: true,
                slider_width: 800,
                min: 1,
                max: 7,
                step: 1,
                start: start2,
                on_finish: function(data){
                    data.scale_start = start2
                }
            };
            timeline.push(certainty);
            
            var clarity ={
                type: 'html-slider-response',
                stimulus: "<div class = 'instructions'><p><b>Read</b> the story below <b>carefully</b> and answer the questions that follow:</p><br><br><p style='font-size:20px;'><i>" + vignettes_rand[order[k]][k] + "</i></p><br><br></div><p><b>How clear are " + vignettes_rand[4][k] + "'s intentions in this story?</b></p>",
                labels: ["1</p>Completely unclear", "2</p>", "3</p>", "4</p>", "5</p>", "6</p>", "7</p>Completely clear"],
                require_movement: true,
                slider_width: 800,
                min: 1,
                max: 7,
                step: 1,
                start: start3,
                on_finish: function(data){
                    data.scale_start = start3
                }
            };
            timeline.push(clarity);
            
            if(k == 8){
                var attn_check ={
                    type: 'html-slider-response',
                    stimulus: "<div class = 'instructions'><p><b>Read</b> the story below <b>carefully</b> and answer the questions that follow:</p><br><br><p style='font-size:20px;'><i>" + vignettes_rand[order[k]][k] + "</i></p><br><br></div><p><b>This item is to check that you are paying attention. Please slide the slider all the way to the left before continuing.</b></p>",
                    labels: ["1</p>Not a lot", "2</p>", "<p>3</p>", "4</p>Neither a lot nor not a lot", "5</p>", "6</p>", "7</p>A lot"],
                    require_movement: true,
                    slider_width: 800,
                    min: 1,
                    max: 7,
                    step: 1,
                    start: 7
                }
                timeline.push(attn_check);
                };
            
            
            var praise_blame ={
                type: 'html-slider-response',
                stimulus: "<div class = 'instructions'><p><b>Read</b> the story below <b>carefully</b> and answer the questions that follow:</p><br><br><p style='font-size:20px;'><i>" + vignettes_rand[order[k]][k] + "</i></p><br><br></div><p><b>How much praise or blame does " + vignettes_rand[4][k] + " deserve for their actions?</b></p>",
                labels: ["1</p>A lot of praise", "2</p>", "<p>3</p>", "4</p>Neither praise nor blame", "5</p>", "6</p>", "7</p>A lot of blame"],
                require_movement: true,
                slider_width: 800,
                min: 1,
                max: 7,
                step: 1,
                start: start4,
                on_finish: function(data){
                    data.scale_start = start4
                }
            };
            timeline.push(praise_blame);
            
            var interesting ={
                type: 'html-slider-response',
                stimulus: "<div class = 'instructions'><p><b>Read</b> the story below <b>carefully</b> and answer the questions that follow:</p><br><br><p style='font-size:20px;'><i>" + vignettes_rand[order[k]][k] + "</i></p><br><br></div><p><b>How interesting do you find this story?</b></p>",
                labels: ["1</p>Very uninteresting", "2</p>", "3</p>", "4</p>Somewhat interesting", "5</p>", "6</p>", "7</p>Very interesting"],
                require_movement: true,
                slider_width: 800,
                min: 1,
                max: 7,
                step: 1,
                start: start5,
                on_finish: function(data){
                    data.scale_start = start5
                }
            };
            timeline.push(interesting);
            
            var emotional_response ={
                type: 'html-slider-response',
                stimulus: "<div class = 'instructions'><p><b>Read</b> the story below <b>carefully</b> and answer the questions that follow:</p><br><br><p style='font-size:20px;'><i>" + vignettes_rand[order[k]][k] + "</i></p><br><br></div><p><b>How personally upsetting or uplifting did you find this story?</b></p>",
                labels: ["1</p>Extremely upsetting", "2</p>", "3</p>", "4</p>Neither upsetting nor uplifting", "5</p>", "6</p>", "7</p>Extremely uplifting"],
                require_movement: true,
                slider_width: 800,
                min: 1,
                max: 7,
                step: 1,
                start: start6,
                on_finish: function(data){
                    data.scale_start = start6
                }
            };
            timeline.push(emotional_response);
            
            var believable ={
                type: 'html-slider-response',
                stimulus: "<div class = 'instructions'><p><b>Read</b> the story below <b>carefully</b> and answer the questions that follow:</p><br><br><p style='font-size:20px;'><i>" + vignettes_rand[order[k]][k] + "</i></p><br><br></div><p><b>How believable do you find this story?</b></p>",
                labels: ["1</p>Completely unbelievable", "2</p>", "3</p>", "4</p>", "5</p>", "6</p>", "7</p>Completely believable"],
                require_movement: true,
                slider_width: 800,
                min: 1,
                max: 7,
                step: 1,
                start: start7,
                on_finish: function(data){
                    data.scale_start = start7
                }
            };
            timeline.push(believable);
            
            var random_sample = {
                type: 'html-slider-response',
                stimulus: "<div class = 'instructions'><p><b>Read</b> the story below <b>carefully</b> and answer the questions that follow:</p><br><br><p style='font-size:20px;'><i>" + vignettes_rand[order[k]][k] + "</i></p><br><br></div><p><b>Now imagine 100 random people in the same situation. How many of them would do what " + vignettes_rand[4][k] + ' did?</b></p>',
                labels: [0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100],
                min: 0,
                max: 100,
                step: 1,
                start: start8,
                require_movement: true,
                slider_width: 800,
                on_finish: function(data){
                    data.scale_start = start8
                }
            };
            timeline.push(random_sample);
            
            var options = [vignettes_rand[5][k], vignettes_rand[6][k], vignettes_rand[7][k]]
            var options = jsPsych.randomization.shuffle(options);
            
            var mcq = {
                type: 'survey-multi-choice',
                questions: [
                    {
                        prompt: '<b>' + vignettes_rand[3][k] + '</b>',
                        name: 'mcq',
                        options: [options[0], options[1], options[2]],
                        required: true,
                        horizontal: false
                    }
                ]
            };
            timeline.push(mcq);
        };
        
        var demos1 = {
            type: 'survey-multi-choice',
            questions:
            [
                {
                    prompt:'<b>To which gender do you most identify?</b>',
                    name: 'gender', 
                    options: ['Male', 'Female', 'Other', 'Prefer not to say'],
                    required: true,
                    horizontal: false
                },
                {
                    prompt: '<b>Is English your first language?</b>',
                    name: 'English',
                    options: ['Yes', 'No'],
                    required: true,
                    horizontal: false
                },
                {   prompt: '<b>What is the highest level of education you have completed?</b>',
                    name:'education',
                    options: ['Some high school','High school', 'Some college', '2 year degree', '4 year degree', 'Postgraduate/Professional degree/other'],
                    required: true,
                    horizontal: false
                },
                {
                    prompt: "<b>Do you usually think of yourself as liberal, moderate, conservative, or something else?</b>",
                    name: 'ideology',
                    options: ['Very liberal', 'Liberal', 'Slightly liberal', 'Moderate/Middle-of-the-road', 'Slightly conservative', 'Conservative', 'Very Conservative', 'Other', "Don't know/Not political"],
                    required: true, 
                    horizontal: false
                },
                {
                    prompt: '<b>What was the total amount of income you earned during the last year?.</b>',
                    name: 'income',
                    options: ['Under $5,000', '$5,000 - $10,000', '$10,000 - $15,000', '$15,000 - $25,000', '$25,000 - $35,000', '$35,000 - $50,000', '$50,000 - $65,000', '$65,000 - $80,000', '$80,000 - $100,000', 'Over $100,000'],
                    required: true,
                    horizontal: false
                },
            ]
        };
        timeline.push(demos1);
        
        var demos2 = {
            type: 'survey-text',
            questions: [
                {
                    prompt: '<b>How old are you?</b>',
                    name: 'age',
                    required: true}
            ]   
        };
        timeline.push(demos2);
        
        var prolific= {
        type: 'survey-text',
        questions: [
                {
                    prompt: '<br><p><b>Please copy and paste your Prolific ID into the box below:</b>',
                    name: 'prolific_id',
                    required: true
                }
            ]
        };
        timeline.push(prolific);
        
        var freeresponse = {
            type: 'survey-text',
            questions: [
                {
                    prompt: '<b>Please put any comments or questions about this study below</b>',
                    name: 'free_response',
                    required: false    
                }
            ]
        };
        timeline.push(freeresponse);
        
        var link = 'LINK';
        var conclusion = {
            type: 'html-button-response',
            stimulus: '<p><b>Please copy the link below and click the FINISH button</b>.</p><p>Then, paste the link in your browser to recieve your payment. <p>https://app.prolific.co/submissions/complete?cc=1E4114F3</p><p>Thank you for your participation!</p>',
            choices: ['CLICK HERE TO FINISH']
        };
        timeline.push(conclusion);

        
        //Runs the trials in the 'timeline' list of trials
        jsPsych.init({
            timeline: timeline, 
            show_progress_bar: true,
            on_finish: function() {
                firebase.database().ref(firebase.auth().currentUser.uid).set({
                    data: jsPsych.data.get().values()
                });
            }
        });
    </script>
</html>