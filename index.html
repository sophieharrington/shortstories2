<!DOCTYPE html>
<html>
    <head>
        <title>Short Stories</title>
        
        <!-- FIREBASE -->
        <!-- The core Firebase JS SDK is always required and must be listed first -->
        <script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-auth.js"></script>
        <script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-database.js"></script>
        
        <script>
          // Your web app's Firebase configuration
          var firebaseConfig = {
            apiKey: "AIzaSyBdhDN0IM9QyiqdaV4ED7aziSwYlMW7VFU",
            authDomain: "short-stories2.firebaseapp.com",
            databaseURL: "https://short-stories2.firebaseio.com",
            projectId: "short-stories2",
            storageBucket: "short-stories2.appspot.com",
            messagingSenderId: "506168221956",
            appId: "1:506168221956:web:b1bedffe968cc2a37e7051"
          };
          // Initialize Firebase
          firebase.initializeApp(firebaseConfig);
            var database = firebase.database();

        </script>
        
        <!-- jsPsych -->
        <script type="text/javascript" src="jspsych-6.1.0/jspsych.js"></script>
        <script type='text/javascript' src='jspsych-6.1.0/plugins/jspsych-external-html.js'></script>
        <script type="text/javascript" src="jspsych-6.1.0/plugins/jspsych-instructions.js"></script>
        <script type="text/javascript" src="jspsych-6.1.0/plugins/jspsych-survey-likert.js"></script>
        <script type="text/javascript" src="jspsych-6.1.0/plugins/jspsych-html-slider-response.js"></script>
        <script type="text/javascript" src="jspsych-6.1.0/plugins/jspsych-survey-multi-choice.js"></script>
        <script type='text/javascript' src='jspsych-6.1.0/plugins/jspsych-survey-text.js'></script>
        <script type='text/javascript' src='jspsych-6.1.0/plugins/jspsych-html-button-response.js'></script>
        <link href="jspsych-6.1.0/css/jspsych.css" rel="stylesheet" type="text/css"></link>
        
        <!-- jsPsych -->
        <!-- CSS -->
        <style type="text/css">
            .instructions {
                margin-right: 300px;
                margin-left: 300px;
                text-align: left;
            }
        </style>
        
    </head>
    <body></body>
    <script type='text/javascript'>
        
        //Initialize vignettes and the condition order
        
        //Condition presentation order
        var order = [0,0,0,0,0,0,0,1,1,1,1,1,1,1,2,2,2,2,2,2,2];
        var order = jsPsych.randomization.shuffle(order);
        
        //Vignette presentation order
        var vignette_order = [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20];
        var vignette_order = jsPsych.randomization.shuffle(vignette_order);
        
        //Vignettes
        //1. Unintentional
        //2. Intentional
        //3. Ambiguous
        var vignettes = [
            //Unambiguous
            ["Joseph is the owner of a large chain of department stores located throughout the Midwest. Recently, Joseph learned about a local children's hospital that was about to declare bankruptcy. Because he believed it would boost the reputation of his company, Joseph donated several million dollars to the hospital.",
 "Zoey is entering her college's essay competition, which awards a prize of $500 to one winner. Her close friend is also competing, but is struggling to know what to write. Because Zoey wants her friend to stop asking for help, she decides to help her with her essay. Zoey gave her friend some great ideas, so her friend wins the competition.",
 "Nora's neighbor volunteers part-time at a homeless shelter. The shelter is now accepting new volunteers. Nora thinks volunteering will impress her attractive neighbor and she signs up to work there. The shelter is grateful for having new volunteers and Nora takes good care of the homeless people there.",
 "Victoria works as a promoter of charitable events. Her organization handles plans and promotes major fundraising events to raise donations. Victoria believes she will earn a percentage of the fundraiser's earnings and she works hard for the next fundraiser. The event raises over $2 million for charity. ",
 "Owen's friend has just been in a car accident and lost a considerable amount of blood. His friend has a rare blood type A-B negative which is in low supply at blood banks nearby. Owen's blood type is a perfect match. Owen knows he could get paid to donate blood and he donates his blood to the local blood bank. Through Owen's donation, his friend can have a blood transfusion.",
 "Luna spends several days in Haiti with a volunteering organization, building shelter for impoverished families. She thinks she looks good in the photographs taken on the trip and she decides to blog about the experience. Luna's blog post gets a lot of attention online and as a result the organization gets many more volunteers. ",
 "Chloe is in the queue to pay for her car parking ticket. The stranger behind her does not have enough change for their ticket. When paying, Chloe does not think she has any change. Chloe takes her ticket and leaves her change. With Chloe's spare change, the stranger behind her is able to pay for their ticket.",
 "Penelope is studying in the library, the night before her final exam. Nearby, a student is searching for their phone. Penelope thinks she has dropped her pen. Penelope looks on the floor and she finds the student's lost phone under a chair. The student appreciates her help.",
 'Natalie has been baking for years and always experiments with new ingredients. Recently, she learns about a bake-sale at the community center, in aid of the Brain Tumour Foundation. Because Natalie believes this bake-sale will mean she can try out new receipes, she donates many different cakes to the bake-sale. The bakesale earned over $200. ',
 'Jayden and his girlfriend have just moved in together and want to buy a dog. Jayden visits the pet store. He thinks buying a rescue dog is cheaper than the pet store, so he decides to visit the animal shelter. Jayden adopts a Greyhound, which has been rescued from its abusive owner. ',
 "Grayson is on his lunch break and he walks to a noodle bar. When the server brings the bill, it totals to $7. Grayson checks his wallet and only has a $50 bill. He thinks the server is going to give him change. Grayson gives the $50 bill to the server. The server takes the $50 and the server's manager congratulates him for being a giving good service. ",
 "Liam lives near a co-operative food store, which relies soley on volunteers. It is understaffed and in danger of closing down. Liam thinks the store offers employee discount. He starts working there every weekends. After Liam starts, the cooperative is making money and customers comment on the store's improvements. ",
 "Hannah is out for coffee with an old school friend. Hannah's friend tells her about a charity half-marathon that she has been training for. Hannah believes this marathon would greatly improve her physical fitness. She registers for the Boston Marathon. Later that year, when Hannah's runs the Boston Marathon, she raises over $400 for charity.",
 "Levi is checking into their hotel. The hotel elevator is out of service, so will have to use the very steep stairs to the tenth floor. At the staircase, another hotel guest is slowly walking in front of them with their luggage. Levi believes the other guest will keep them waiting too long. Levi offers to carry the guest's suitcase up ten flights of stairs. The guest accepts and is thankful to avoid any injuries.",
 "Issac lives in Minnesota. The coldest winter on record is approaching. Issac thought their winter coat was old and wanted to throw it out. When Issac is walking down the street that day, they take off their only coat and give it to a homeless man. Without Issac's coat the homeless man would not have survived the winter. ",
 "Ellie is walking round the mall doing some window shopping. The mall is very quiet, and she gets approached by a bone marrow charity volunteer. Ellie wants the volunteer to leave them alone, so she signs the paperwork. She can be called at any time to be a bone marrow donor which would save someone's life. ",
 'Gabriel studies Physics at college. His department has introduced an outreach program for local high schools, which needs student volunteers. Gabriel believes this would be an easy way to earn course credit and he signs up to the program. Gabriel volunteers for the program every week, and with his guidance, 3 students apply to college.',
 "Julian is top of his English class at high school.  His younger brother is falling behind in class on learning to read and write. Because Julian thinks their mum will pay him if he starts tutoring his brother, he offers to help. Every night, Julian spends an hour practicing reading and writing with his brother. Later that year, Julian's brother excels in class.",
 'Late at night, Joshua is waiting outside a bar for a taxi. Joshua sees one of his female friends who has been out drinking is also waiting alone. Joshua thinks she may be flirting with him. Joshua approaches her and offers to share a taxi. She accepts his offer to share a taxi and arrives home safely.',
 "Mia is waiting to cross the road at the traffic lights. Next to her, a woman walks out into the road as there is a motorcyclist running the red lights. Mia believes this woman is her neighbor, so she shouts for the woman's attention. The woman stops to turn around. The motorcyclist now has time to swerve out of the way of the woman.",
 'Avery has a job interview. Beforehand, she grabs a snack. There is a long queue at the checkouts. The customer in front of Avery has a large cart of shopping but is counting out their total bill in loose change. Because Avery is anxious to get to the front of the queue, she gives the customer $50. This means that that the customer can feed their family this week. '
            ],
            
            //Intentional
            ["Joseph is the owner of a large chain of department stores located throughout the Midwest. Recently, Joseph learned about a local children's hospital that was about to declare bankruptcy. Because he believed the children's hospital was making a real difference, Joseph donated several million dollars to the hospital.",
 "Zoey is entering her college's essay competition, which awards a prize of $500 to one winner. Her close friend is also competing, but is struggling to know what to write. Because Zoey wants to help her friend do well, she decides to help her with her essay. Zoey gave her friend some great ideas, so her friend wins the competition.",
 "Nora's neighbor volunteers part-time at a homeless shelter. The shelter is now accepting new volunteers. Nora thinks volunteering will benefit the local homeless people and she signs up to work there. The shelter is grateful for having new volunteers and Nora takes good care of the homeless people there. ",
 "Victoria works as a promoter of charitable events. Her organization handles plans and promotes major fundraising events to raise donations. Victoria believes she will not earn a percentage of the fundraiser's earnings and she works hard for the next fundraiser. The event raises over $2 million for charity. ",
 "Owen's friend has just been in a car accident and lost a considerable amount of blood. The friend has a rare blood type A-B negative which is in low supply at blood banks nearby. Owen's blood type is a perfect match. Owen knows his blood matches his friend's and he donates his blood to the local blood bank. Through Owen's donation, his friend can have a blood transfusion.",
 "Luna spends several days in Haiti with a volunteering organization, building shelter for impoverished families. She thinks she could help raise awareness of the organization, so she decides to blog about the experience. Luna's blog post gets a lot of attention online and as a result the organization gets many more volunteers. ",
 "Chloe is in the queue to pay for her car parking ticket. The stranger behind her does not have enough change for their ticket. When paying, Chloe thinks the stranger is out of change. Chloe takes her ticket and leaves her change. With Chloe's spare change, the stranger behind her is able to pay for their ticket.",
 "Penelope is studying in the library, the night before her final exam. Nearby, a student is searching for their phone. Penelope thinks she could help the search. Penelope looks on the floor and finds the student's lost phone under a chair. The student appreciates her help.",
 'Natalie has been baking for years and always experiments with new ingredients. Recently, she learns about a bake-sale at the community center, in aid of the Brain Tumour Foundation. Because Natalie believes this charity really needs her support, she donates many different cakes to the bake-sale. The charity bakesale earned over $200.',
 'Jayden and his girlfriend have just moved in together and want to buy a dog. Jayden visits the pet store. He thinks they could give a rescue dog a caring home, so he decides to visit the animal shelter. Jayden adopts a Greyhound, which has been rescued from its abusive owner. ',
 "Grayson is on his lunch break and he walks to a noodle bar. When the server brings the bill, it totals to $7. Grayson checks his wallet and only has a $50 bill. He thinks the server is hardworking and deserving. Grayson gives the $50 bill to the server. The server takes the $50 and the server's manager congratulates him for being a giving good service. ",
 "Liam lives near a co-operative food store, which relies soley on volunteers. It is understaffed and in danger of closing down. Liam thinks the store unites the community, so he starts working there on weekends. After Liam starts, the cooperative is making money and customers comment on the store's improvements. ",
 "Hannah is out for coffee with an old school friend. Hannah's friend tells her about a charity half-marathon that she has been training for. Hannah believes this marathon woud greatly benefit her chosen charity. She registers for the Boston Marathon. Later that year, when Hannah's runs the Boston Marathon, she raises over $400 for charity.",
 "Levi is checking into their hotel. The hotel elevator is out of service, so will have to use the very steep stairs to the tenth floor. At the staircase, another hotel guest is slowly walking in front of them with their luggage. Levi believes the other guest is about to injure themselves. Levi offers to carry the guest's suitcase up ten flights of stairs. The guest accepts and is thankful to avoid any injuries.",
 "Issac lives in Minnesota. The coldest winter on record is approaching. Issac thought donating their winter coat could help someone. When Issac is walking down the street that day, they take off their only coat and give it to a homeless man. Without Issac's coat the homeless man would not have survived the winter. ",
 "Ellie is walking round the mall doing some window shopping. The mall is very quiet, and she gets approached by a Bone Marrow charity volunteer. Ellie wants to support the charity's work, so she signs the paperwork. She can be called at any time to be a bone marrow donor which would save someone's life. ",
 'Gabriel studies Physics at college. His department has introduced an outreach program for local high schools, which needs student volunteers. Gabriel believes this could help students to pursue science degrees and he signs up. Gabriel volunteers for the program every week, and with his guidance, 3 students apply to college.',
 "Julian is top of his English class at high school. His younger brother is falling behind in class on learning to read and write. Because Julian thinks that his brother could use some extra English practice, he offers to help. Every night, Julian spends an hour practicing reading and writing with his brother. Later that year, Julian's brother excels in class.",
 'Late at night, Joshua is waiting outside a bar for a taxi. Joshua sees one of his female friends who has been out drinking is also waiting alone. Joshua thinks she may be vulnerable standing alone. Joshua approaches her and offers to share a taxi. She accepts his offer to share a taxi and arrives home safely.',
 "Mia is waiting to cross the road at the traffic lights. Next to her, a woman walks out into the road as there is a motorcyclist running the red lights. Mia believes this woman will get run over, so she shouts for the woman's attention. The woman stops to turn around. The motorcyclist now has time to swerve out of the way of the woman.",
 'Avery has a job interview. Beforehand, she grabs a snack. There is a long queue at the checkouts. The customer in front of Avery has a large cart of shopping but is counting out their total bill in loose change. Because Avery empathises with the customer, she gives the customer the $50. This means that that the stranger can feed their family this week. '
            ],
            //Ambiguous 
            ["Joseph is the owner of a large chain of department stores located throughout the Midwest. Recently, Joseph learned about a local children's hospital that was about to declare bankruptcy. Several months later, after he reviewed the annual financial reports, Joseph donated several million dollars to the hospital. ",
 "Zoey is entering her college's essay competition, which awards a prize of $500 to one winner. Her close friend is also competing, but is struggling to know what to write. Zoey has a sandwich for lunch and afterwards she has eaten, she decides to help her. Zoey gave her friend some great ideas, so her friend wins the competition.",
 "Nora's neighbor volunteers part-time at a homeless shelter. The shelter is now accepting new volunteers. One day, Nora looks at the availability on her schedule and she signs up to work there. The shelter is grateful for having new volunteers and Nora takes good care of the homeless people there. ",
 'Victoria works as a promoter of charitable events. Her organization handles plans and promotes major fundraising events to raise donations. Victoria confirms the bookings for the venue and catering company for an event. She works hard at the next fundraiser. The event raises over $2 million for charity. ',
 "Owen's friend has just been in a car accident and lost a considerable amount of blood. The friend has a rare blood type A-B negative which is in low supply at blood banks nearby. Owen's blood type is a perfect match. Owen parks his car in the parking lot and he donates his blood to the local blood bank. Through Owen's donation, his friend can have a blood transfusion.",
 "Luna spends several days in Haiti with a volunteering organization, building shelter for impoverished families. Afterwards, she gets on a coach to return home from the airport and she decides to blog about the experience. Luna's blog post gets a lot of attention online and as a result the organization gets many more volunteers. ",
 "Chloe is in the queue to pay for her car parking ticket. The stranger behind her does not have enough change for their ticket. Chloe gets her change and her keys out her bag. Chloe takes her ticket and leaves her change. With Chloe's spare change, the stranger behind her is able to pay for their ticket.",
 "Penelope is studying in the library, the night before her final exam. Nearby, a student is searching for their phone. Penelope highlights her study notes. Penelope looks on the floor and finds the student's lost phone under a chair. The student appreciates her help.",
 'Natalie has been baking for years and always experiments with new ingredients. Recently, she learns about a bake-sale at the community center, in aid of the Brain Tumour Foundation. Natalie buys enough cake ingredients at the grocery store and she donates many different cakes to the bake-sale. The bakesale earned over $200. ',
 'Jayden and his girlfriend have just moved in together and want to buy a dog. Jayden visits the pet store. He gets his car keys from his coat pocket and he decides to visit the animal shelter. Jayden adopts a Greyhound, which has been rescued from its abusive owner. ',
 "Grayson is on his lunch break and he walks to a noodle bar. When the server brings the bill, it totals to $7. Grayson checks his wallet and only has a $50 bill. He gets some cultery and napkins and he gives the $50 bill to the server. The server takes the $50 and the server's manager congratulates him for being a giving good service. ",
 "Liam lives near a co-operative food store, which relies solely on volunteers. It is understaffed and in danger of closing down. Liam walks past the store one day on his way home. He starts working there on weekends. After Liam starts, the cooperative is making money and customers comment on the store's improvements. ",
 "Hannah is out for coffee with an old school friend. Hannah's friend tells her about a charity half-marathon that she has been training for. Hannah finishes her coffee and arrives home. She registers for the Boston Marathon. Later that year, when Hannah's runs the Boston Marathon, she raises over $400 for charity.",
 "Levi is checking into their hotel. The hotel elevator is out of service, so will have to use the very steep stairs to the tenth floor. At the staircase, another hotel guest is slowly walking in front of them with their luggage. Levi adjusts the straps on his luggage. Levi offers to carry the guest's suitcase up ten flights of stairs. The guest accepts and is thankful to avoid any injuries.",
 "Issac lives in Minnesota. The coldest winter on record is approaching. Issac leaves the house to put up some groceries. When Issac is walking down the street that day, they take off their only coat and give it to a homeless man. Without Issac's coat the homeless man would not have survived the winter. ",
 "Ellie is walking round the mall doing some window shopping. The mall is very quiet, and she gets approached by a Bone Marrow charity volunteer. Ellie is handed a pen by the volunteer and she signs the paperwork. She can be called at any time to be a bone marrow donor which would save someone's life. ",
 'Gabriel studies Physics at college. His department has introduced an outreach program for local high schools, which needs student volunteers. Gabriel buys a coffee at the cafe on campus and he signs up. Gabriel volunteers for the program every week, and with his guidance, 3 students apply to college.',
 "Julian is top of his English class at high school. His younger brother is falling behind in class on learning to read and write. On Tuesday, Julian comes home after a day of school and he offers to help. Every night, Julian spends an hour practicing reading and writing with his brother. Later that year, Julian's brother excels in his class.",
 'Late at night, Joshua is waiting outside a bar for a taxi. Joshua sees one of his female friends who has been out drinking is also waiting alone. Joshua puts his coat on and zips it up. Joshua approaches her and offers to share a taxi. She accepts his offer to share a taxi and arrives home safely.',
 "Mia is waiting to cross the road at the traffic lights. Next to her, a woman walks out into the road as there is a motorcyclist running the red lights. Mia puts her bags on the ground and she shouts for the woman's attention. The woman stops to turn around. The motorcyclist now has time to swerve out of the way of the woman.",
 'Avery has a job interview. Beforehand, she grabs a snack. There is a long queue at the checkouts. The customer in front of Avery has a large cart of shopping but is counting out their total bill in loose change. Avery unloads her shopping from her cart and she gives the customer the $50. This means that that the stranger can feed their family this week. '
            ],
            
            //Comprehension questions
            ['What kind of hospital did Alexander donate to? ',
 'What competition is Zoey entering?',
 'Where does Nora volunteer? ',
 'What job does Victoria have?  ',
 'What does Owen donate?',
 'What does Luna go volunteering? ',
 'What is Chloe paying for? ',
 'Where is Penelope studying?',
 'What charity event did Natalie donate to?  ',
 'Where do they visit first? ',
 'Where does Grayson go for lunch?',
 'Where does Liam volunteer?',
 'What marathon does Hannah run? ',
 'What does Levi carry for the hotel guest? ',
 'What does Issac give to the homeless man? ',
 'What did Ellie sign up to donate? ',
 "What is Gabriel's major? ",
 "What is Julian's tutoring? ",
 'What is Joshua waiting for? ',
 'Where is Mia waiting?  ',
 'What is Avery late for? '
            ],

            //Actor
            ['Joseph',
 'Zoey',
 'Nora ',
 'Victoria',
 'Owen ',
 'Luna',
 'Chloe ',
 'Penelope ',
 'Natalie ',
 'Jayden ',
 'Grayson ',
 'Liam',
 'Hannah ',
 'Levi',
 'Isaac',
 'Ellie',
 'Gabriel',
 'Julian',
 'Joshua',
 'Mia',
 'Avery'
            ],
            
            //Correct answer
            ["Children's hospital",
 'Essay writing ',
 'Homeless shelter',
 'Charity events promoter ',
 'Blood',
 'Haiti ',
 'Parking ticket',
 'Library ',
 'Bake sale ',
 'Pet store ',
 'Noodle bar',
 'Co-operative',
 'Boston Marathon ',
 'Luggage ',
 'Coat',
 'Bone Marrow',
 'Physics',
 'Reading and writing  ',
 'Taxi ',
 'Road crossing ',
 'Job interview '
            ],
            
            //Other option 1
            ['Animal hospital ',
 'Marathon ',
 'Food bank ',
 'Nightclub promoter ',
 'Kidney ',
 'Australia ',
 'Car wash  ',
 'Cafe',
 'Clothing swap ',
 'Dog show',
 'Sandwich shop',
 'Thrift shop',
 'New York Marathon',
 'Grocery shopping',
 'Money',
 'Blood ',
 'History',
 'Gym class',
 'Train  ',
 'Bus stop ',
 'Dinner plans'
             ],
            
            //Other option 2 
            ['Psychiatric hospital ',
 'Spelling bee',
 'Local school ',
 'Wedding planner ',
 'Bone marrow ',
 'Kenya ',
 'Car insurance ',
 'At home ',
 'Fun run ',
 'Dog groomers',
 'Michelin star restaurant',
 'Animal shelter ',
 'New Jersey Marathon ',
 'Sports equipment',
 'Food',
 'Organs ',
 'Maths',
 'Mathematics',
 'Bus',
 'Home',
 'Shopping'
            ],
        ];
        
        //Lists of randomized vignettes, in the appropriate condition
        var vignettes_rand = [[],[],[],[],[],[],[],[]];
        
        //Number of conditions + 2 (for comprehension questions and actors) + 3 (for each answer to the MCQs)
        var n_elements = 8;
        
        //Number of vignettes
        var n_vignettes = 21;
        
        
        //The following two loops take the existing vignettes and add them to a new list in a shuffled order that corresponds to the order
        //that is saved in 'shuffled_order'. It does this while preserving the order of the vignettes across the three conditions and the comprehension questions
        //I.e., michael, michael, michal, dietary requirements, michael?
        var j;
        var i;
        //For every element in the list of vignettes (i.e., unintentional, intentional, ambiguous, and comprehension questions) . .. 
        for (j = 0; j < n_elements; j++) {
            // . . . go through each of the elements in each condition list . . . 
            for(i = 0; i < n_vignettes; i++) {
                // . . . and, to the list of randomised vignettes (currently black), add the vignette from the corresponding condition . . .
                //. . . at the position marked in the shuffled vignette_order variable
                vignettes_rand[j][i] = vignettes[j][vignette_order[i]]
                
            }
        };
        
        //Create a 'timeline' -  a list of all the trials
        var timeline = [];
        
        Function to check whether consent has been given
        var check_consent = function(elem) {
             if (document.getElementById('consent_checkbox').checked) {
                 return true;
            }
            else {
                alert("If you wish to participate, you must check the box next to the statement 'I agree to participate in this study.'");
                return false;
            }
            return false; 
        };
        
        Presents external consent page to participants
         var consent = {
            type:'external-html',
            url: "consent.html",
            cont_btn: "start",
            check_fn: check_consent
        };
        timeline.push(consent);
        
        var instructions = {
            type: 'instructions',
            pages: ["<div class = 'instructions'><p>In this experiment, you will view short <b>stories</b>. You will only be able to read each story once, so read each story carefully. Then, you will then be asked to rate different aspects of the story itself and what you think about specific characters.</p><p>Please read carefully as you may be asked comprehension questions throughout the task. <b>Bonus payments</b> will be given for the <b>accuracy</b> of your answers to these questions.</p><p>Please click next to begin the experiment.</p></div>"],
            show_clickable_nav: true
        };
        timeline.push(instructions);

        var n_trials = 20;
        var k;
        for (k = 0; k < n_trials; k++) {
            
            var goodness ={
                type: 'html-slider-response',
                stimulus: '<div class = "instructions"><p><b>Read</b> the story below <b>carefully</b> and answer the questions that follow:</p><br><br><p style="font-size:20px;"><i>' + vignettes_rand[order[k]][k] + '</i></p><br><br></div><p><b>How good do you think ' + vignettes_rand[4][k] + ' is as a person?</b></p>',
                labels: ["1</p>Mainly a bad person", "2</p>", "3</p>", "4</p>Neither a bad nor a good person", "5</p>", "6</p>", "7</p>Mainly a good person"],
                require_movement: true,
                slider_width: 800,
                min: 1,
                max: 7,
                step: 1,
            };
            timeline.push(goodness);

            var certainty ={
                type: 'html-slider-response',
                stimulus: '<div class = "instructions"><p><b>Read</b> the story below <b>carefully</b> and answer the questions that follow:</p><br><br><p style="font-size:20px;"><i>' + vignettes_rand[order[k]][k] + '</i></p><br><br></div><p><b>How certain are you that ' + vignettes_rand[4][k] + ' is a good or bad person?</b></p>',
                labels: ["1</p>Very uncertain", "2</p>", "3</p>", "4</p>Neither uncertain nor certain", "5</p>", "6</p>", "7</p>Very certain"],
                require_movement: true,
                slider_width: 800,
                min: 1,
                max: 7,
                step: 1,
            };
            timeline.push(certainty);
            
            var clarity ={
                type: 'html-slider-response',
                stimulus: "<div class = 'instructions'><p><b>Read</b> the story below <b>carefully</b> and answer the questions that follow:</p><br><br><p style='font-size:20px;'><i>" + vignettes_rand[order[k]][k] + "</i></p><br><br></div><p><b>How clear are " + vignettes_rand[4][k] + "'s intentions in this story?</b></p>",
                labels: ["1</p>Completely unclear", "2</p>", "3</p>", "4</p>", "5</p>", "6</p>", "7</p>Completely clear"],
                require_movement: true,
                slider_width: 800,
                min: 1,
                max: 7,
                step: 1,
            };
            timeline.push(clarity);
            
            var praise_blame ={
                type: 'html-slider-response',
                stimulus: "<div class = 'instructions'><p><b>Read</b> the story below <b>carefully</b> and answer the questions that follow:</p><br><br><p style='font-size:20px;'><i>" + vignettes_rand[order[k]][k] + "</i></p><br><br></div><p><b>How much praise or blame does " + vignettes_rand[4][k] + " deserve for their actions?</b></p>",
                labels: ["1</p>A lot of praise", "2</p>", "<p>3</p>", "4</p>Neither praise nor blame", "5</p>", "6</p>", "7</p>A lot of blame"],
                require_movement: true,
                slider_width: 800,
                min: 1,
                max: 7,
                step: 1,
            };
            timeline.push(praise_blame);
            
            var interesting ={
                type: 'html-slider-response',
                stimulus: "<div class = 'instructions'><p><b>Read</b> the story below <b>carefully</b> and answer the questions that follow:</p><br><br><p style='font-size:20px;'><i>" + vignettes_rand[order[k]][k] + "</i></p><br><br></div><p><b>How interesting do you find this story?</b></p>",
                labels: ["1</p>Very uninteresting", "2</p>", "3</p>", "4</p>Somewhat interesting", "5</p>", "6</p>", "7</p>Very interesting"],
                require_movement: true,
                slider_width: 800,
                min: 1,
                max: 7,
                step: 1,
            };
            timeline.push(interesting);
            
            var upsetting ={
                type: 'html-slider-response',
                stimulus: "<div class = 'instructions'><p><b>Read</b> the story below <b>carefully</b> and answer the questions that follow:</p><br><br><p style='font-size:20px;'><i>" + vignettes_rand[order[k]][k] + "</i></p><br><br></div><p><b>How personally upsetting did you find this story?</b></p>",
                labels: ["1</p>Not at all upsetting", "2</p>", "3</p>", "4</p>Somewhat upsetting", "5</p>", "6</p>", "7</p>Very upsetting"],
                require_movement: true,
                slider_width: 800,
                min: 1,
                max: 7,
                step: 1,
            };
            timeline.push(upsetting);
            
            var believable ={
                type: 'html-slider-response',
                stimulus: "<div class = 'instructions'><p><b>Read</b> the story below <b>carefully</b> and answer the questions that follow:</p><br><br><p style='font-size:20px;'><i>" + vignettes_rand[order[k]][k] + "</i></p><br><br></div><p><b>How believable do you find this story?</b></p>",
                labels: ["1</p>Completely unbelievable", "2</p>", "3</p>", "4</p>", "5</p>", "6</p>", "7</p>Completely believable"],
                require_movement: true,
                slider_width: 800,
                min: 1,
                max: 7,
                step: 1,
            };
            timeline.push(believable);
            
            var random_sample = {
                type: 'html-slider-response',
                stimulus: "<div class = 'instructions'><p><b>Read</b> the story below <b>carefully</b> and answer the questions that follow:</p><br><br><p style='font-size:20px;'><i>" + vignettes_rand[order[k]][k] + "</i></p><br><br></div><p><b>Now imagine 100 random people. How many of them would do what " + vignettes_rand[4][k] + ' did?</b></p>',
                labels: [0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100],
                min: 0,
                max: 100,
                step: 1,
                require_movement: true,
                slider_width: 800
            };
            timeline.push(random_sample);
            
            var options = [vignettes_rand[5][k], vignettes_rand[6][k], vignettes_rand[7][k]]
            var options = jsPsych.randomization.shuffle(options);
            
            var mcq = {
                type: 'survey-multi-choice',
                questions: [
                    {
                        prompt: '<b>' + vignettes_rand[3][k] + '</b>',
                        name: 'mcq',
                        options: [options[0], options[1], options[2]],
                        required: true,
                        horizontal: false
                    }
                ]
            };
            timeline.push(mcq);
        };
        
        var demos1 = {
            type: 'survey-multi-choice',
            questions:
            [
                {
                    prompt:'<b>To which gender do you most identify?</b>',
                    name: 'gender', 
                    options: ['Male', 'Female', 'Other', 'Prefer not to say'],
                    required: true,
                    horizontal: false
                },
                {
                    prompt: '<b>Is English your first language?</b>',
                    name: 'English',
                    options: ['Yes', 'No'],
                    required: true,
                    horizontal: false
                },
                {   prompt: '<b>What is the highest level of education you have completed?</b>',
                    name:'education',
                    options: ['Some high school','High school', 'Some college', '2 year degree', '4 year degree', 'Postgraduate/Professional degree/other'],
                    required: true,
                    horizontal: false
                },
                {
                    prompt: "<b>Do you usually think of yourself as liberal, moderate, conservative, or something else?</b>",
                    name: 'ideology',
                    options: ['Very liberal', 'Liberal', 'Slightly liberal', 'Moderate/Middle-of-the-road', 'Slightly conservative', 'Conservative', 'Very Conservative', 'Other', "Don't know/Not political"],
                    required: true, 
                    horizontal: false
                },
                {
                    prompt: '<b>What was the total amount of income you earned during the last year?.</b>',
                    name: 'income',
                    options: ['Under $5,000', '$5,000 - $10,000', '$10,000 - $15,000', '$15,000 - $25,000', '$25,000 - $35,000', '$35,000 - $50,000', '$50,000 - $65,000', '$65,000 - $80,000', '$80,000 - $100,000', 'Over $100,000'],
                    required: true,
                    horizontal: false
                },
            ]
        };
        timeline.push(demos1);
        
        var demos2 = {
            type: 'survey-text',
            questions: [
                {
                    prompt: '<b>How old are you?</b>',
                    name: 'age',
                    required: true}
            ]
        };
        timeline.push(demos2);
        
        var prolific= {
            type: 'survey-text',
            questions: [
                {
                    prompt: '<br><p><b>Please copy and paste your Prolific ID into the box below:</b>',
                    name: 'prolific_id',
                    required: true
                }
            ]
        };
        timeline.push(prolific);
        
        var link = 'LINK';
        var conclusion = {
            type: 'html-button-response',
            stimulus: '<p>Please copy the link below <b>and click the FINISH button</b>.</p><p>Then paste the link in your browser to recieve your payment.</p><p>Thank you.</p><p><b>' + link + '</b></p>',
            choices: ['CLICK HERE TO FINISH']
        };
        timeline.push(conclusion);

        
        
        //Runs the trials in the 'timeline' list of trials
        jsPsych.init({
            timeline: timeline, 
            preload_images: images,
            show_preload_progress_bar: false,
            on_finish: function() {
                firebase.database().ref(firebase.auth().currentUser.uid).set({
                    data: jsPsych.data.get().values()
                })
            }
        });
    </script>
</html>
            
            

            

            

        